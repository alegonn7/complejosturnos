FROM node:18-alpine

WORKDIR /app

# Instalar dependencias globales
RUN npm install -g turbo

# Copiar archivos de configuraci√≥n
COPY package*.json ./
COPY turbo.json ./

# Copiar packages compartidos
COPY packages ./packages

# Copiar admin
COPY apps/admin ./apps/admin

# Instalar dependencias
RUN npm install

# Exponer puerto
EXPOSE 3001

# Hot reload de Next.js
CMD ["npm", "run", "dev", "--workspace=admin"]